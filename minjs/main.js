var app=angular.module("app",["ui.router","chart.js"]);app.config(["$stateProvider","$urlRouterProvider",function(a,e){e.otherwise("/"),a.state("population",{template:"<population></population>",url:"/"}),a.state("density",{template:"<density></density>",url:"/density"})}]),app.run(["$rootScope","getDataFrom",function(a,e){a.selectChart=[{chart:"pie",label:"Pie chart"},{chart:"bar",label:"Bar chart"},{chart:"doughnut",label:"Doughnut chart"},{chart:"polar",label:"Polar chart"}],a.selected=a.selectChart[0],e.jonkriGet().then(function(e){a.dataToChart=e.data.items,console.log("Get successful")},function(a){console.log(a)})}]),app.controller("populationController",["$scope","$filter","$rootScope","getDataFrom",function(a,e,t,o){a.image="images/img.jpg",a.labels=[],a.data=[],t.$watch("dataToChart",function(t){a.labels.length=0,a.data.length=0;var o=e("orderBy")(t,"+population");angular.forEach(o,function(e){a.labels.push(e.name),a.data.push(e.population)})},!0),a.addCity=function(){o.jonkriPost(a.city).then(function(){console.log("Post successful")},function(a){console.log(a)}),t.dataToChart.push(a.city),a.city={},a.cityForm.$setPristine(),a.cityForm.$setUntouched()},a.selected=t.selected,a.chartChanged=function(){t.chartType=a.selected.chart,t.selected=a.selected}}]),app.controller("densityController",["$scope","$rootScope","$filter",function(a,e,t){a.image="images/density.jpg",a.labels=[],a.data=[],a.areaData={Stockholm:{name:"Stockholm",area:180},"Göteborg":{name:"Göteborg",area:450},"Malmö":{name:"Malmö",area:158.4},Uppsala:{name:"Uppsala",area:48.79},"Västerås":{name:"Västerås",area:52.94},"Örebro":{name:"Örebro",area:49.27},"Linköping":{name:"Linköping",area:42.16},Helsingborg:{name:"Helsingborg",area:38.41},"Jönköping":{name:"Jönköping",area:44.33},"Norrköping":{name:"Norrköping",area:35.68}},console.log(),e.$watch("dataToChart",function(e){a.labels.length=0,a.data.length=0;var o=t("orderBy")(e,"+population");angular.forEach(o,function(e){a.areaData[e.name]&&(a.labels.push(e.name),a.data.push(Math.round(e.population/a.areaData[e.name].area*100)/100))})},!0),a.selected=e.selected,a.chartChanged=function(){e.chartType=a.selected.chart,e.selected=a.selected}}]);